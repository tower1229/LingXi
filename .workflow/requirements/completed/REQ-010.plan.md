# REQ-010 Plan (Auto-generated)

## 目标回放（1-3 行）

将多个安装脚本中重复的文件清单抽取为统一的 `install-manifest.json` 配置文件，各安装脚本读取同一份清单实现安装功能，消除重复维护问题。

## 状态摘要（Status Summary）

- **当前阶段**：review
- **进度**：5/5
- **当前任务**：已完成（待审查）
- **阻塞项**：无
- **上次更新**：2025-01-27
- **自动生成**：是（从 req 功能需求映射）

## 文件变更清单（Files to Change）

| 操作 | 文件路径 | 说明 |
|-----|---------|-----|
| 创建 | `install-manifest.json` | 安装清单配置文件 |
| 修改 | `install.sh` | 读取清单文件进行安装 |
| 修改 | `install.js` | 读取清单文件进行安装 |
| 修改 | `install-remote.sh` | 读取清单文件进行下载安装 |
| 修改 | `install.ps1` | 读取清单文件进行下载安装 |

## 任务清单（Tasks）

- [x] F1: 创建安装清单配置文件（JSON 格式）
  - 实现方案: `install-manifest.json`，包含 commands、rules、hooks、skills、references 等文件列表
  - 验收标准: 文件格式规范，包含所有安装文件路径
- [x] F2: 修改 `install.sh` 读取清单文件
  - 实现方案: 添加 JSON 解析逻辑，替换硬编码的文件列表
  - 验收标准: 脚本能正确读取并安装清单中的文件
- [x] F3: 修改 `install.js` 读取清单文件
  - 实现方案: 使用 Node.js 的 `fs` 和 `JSON.parse` 读取清单
  - 验收标准: 脚本能正确读取并安装清单中的文件
- [x] F4: 修改 `install-remote.sh` 读取清单文件
  - 实现方案: 添加 JSON 解析逻辑（可能需要 `jq` 或纯 Bash 解析）
  - 验收标准: 脚本能正确从 GitHub 下载清单中的文件
- [x] F5: 修改 `install.ps1` 读取清单文件
  - 实现方案: 使用 PowerShell 的 `Get-Content` 和 `ConvertFrom-Json`
  - 验收标准: 脚本能正确从 GitHub 下载清单中的文件

## 交付物（Deliverables）

- [x] 代码变更完成
- [ ] 验收检查清单全部通过（待手工验证）

## 测试规格（Test Specifications）

### 手工验证步骤

| 步骤 | 操作 | 预期行为 |
|-----|-----|---------|
| 1 | 检查 `install-manifest.json` 文件格式 | 格式规范，JSON 可解析 |
| 2 | 检查 `install-manifest.json` 包含所有现有安装文件 | 包含 commands、rules、hooks、skills、references |
| 3 | 运行 `install.sh` 并验证安装 | 脚本能正确读取清单并安装文件（本地复制模式） |
| 4 | 运行 `install.js` 并验证安装 | 脚本能正确读取清单并安装文件（本地复制模式） |
| 5 | 运行 `install-remote.sh` 并验证安装 | 脚本能正确读取清单并下载文件（远程下载模式） |
| 6 | 运行 `install.ps1` 并验证安装 | 脚本能正确读取清单并下载文件（远程下载模式） |
| 7 | 对比各脚本安装的文件列表 | 所有脚本安装的文件列表一致 |
| 8 | 添加新文件到清单后测试 | 所有脚本都能正确识别并安装新文件 |

## 复利候选（Compounding Candidates）

- [ ] （待补充）
