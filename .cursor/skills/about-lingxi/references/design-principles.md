# 灵犀设计原则

## 概述

本文档收录灵犀的核心设计原则，这些原则指导所有设计决策和实现。

## 核心设计原则

### 1. AI Native - 尊重能力，同时保持可控

与 `references/core-values.md` 中 AI Native 一致：尊重 AI 能力，预留进化空间；关键决策以人为主、门控保障。以下为实现与设计原则展开。

**核心思想**：AI Native 不是"把所有事情都交给模型"，也不是"用规则替代模型"。应把 AI 用在高语义、高歧义、需要权衡的环节，把确定性机制用在可标准化、可验证、可审计的环节。

**实现方式**：

- **分层落地**：按"机械层（确定性）→ 协议层（半确定性）→ 推理层（AI 优势）→ 决策层（用户主权）"组织执行链路。
- **能力分工**：让模型负责语义理解与权衡判断；让脚本/工具负责高频、重复、可规则化步骤。
- **风险收敛**：通过输入输出契约、门控和审计约束高风险动作，不用规则替代推理。
- **成本控制**：遵循静默成功与最小高信号，控制上下文体积与调用链路长度。

**设计原则**：

- 应该把 AI 用在高语义、高歧义、需权衡的环节，而非机械执行环节。
- 应该只施加最小必要约束（约束边界与输出，不约束推理过程）。
- 应该保留降级与回退路径（不确定时提问或人工确认）。
- 应该保证关键决策可审计、可解释、可追溯。
- 不应该把所有任务都交给模型，导致成本高和结果波动。
- 不应该通过关键词列表、正则和复杂 if-else 过度替代模型判断。

### 2. 心有灵犀 - 持久化记忆

**核心思想**：让 AI 具备持久化记忆能力，能够记住创造者的判断、品味和责任感。

**实现方式**：

- 经验沉淀机制：自动捕获、评估、沉淀、治理
- 经验索引和匹配：主动提醒风险和提供指针
- 质量资产化：过程产物、实践经验自动沉淀

**设计原则**：

- 任何设计都应该有助于经验的沉淀和复用
- 应该让创造者的判断、取舍、拒绝都能被记录和复用
- 不应该依赖会话级上下文，而应该建立长期的知识资产

### 3. 称心如意 - 降低认知负担

**核心思想**：工具应该追求最好的体验，让创造者能够高效、舒适地使用 AI 辅助工作。

**实现方式**：

- 多入口设计：支持优秀开发者直接切入任意阶段
- 流程解耦：所有环节可跳过，按需执行
- 静默成功：遵循"没有消息就是好消息"的原则
- 最小高信号：仅输出关键信息，省略冗余输出

**设计原则**：

- 应该降低认知负担
- 应该提供友好的交互体验
- 应该让上下文"少而准"
- 应该让常用操作更便捷

### 4. 静默成功原则

**核心思想**：遵循 **Linux 命令行设计哲学**：**没有消息就是好消息**。节省用户时间，节省大模型 token。

**核心原则**：(1) 用户决策权不可侵犯：所有需要用户判断的输出必须完整保留；(2) 静默成功：成功、无问题、无匹配时静默，不输出；(3) 精简非决策输出：减少非关键信息的冗余输出。

工作流命令与 executor 的输出与静默细则见 `references/workflow-output-principles.md`，各 Command/Skill 引用该文档统一约束。

### 5. 上下文组织原则

**核心思想**：让模型聚焦关键信息，提高输出质量。

**原则**：

- **先指针后细节**：先读取 INDEX.md（索引），再按需加载经验文件（细节）
- **最小高信号**：仅输出关键信息（风险级别 + 指针），省略冗长格式
- **分层加载**：先索引与概要，按需加载细节，避免 context rot

**应用场景**：

- 经验索引：先读取 INDEX.md，按需加载经验文件
- 文档引用：通过指针引用，而非复制内容
- 状态摘要：以 INDEX 为 SSoT，其他文件引用而非重复

### 6. 单一事实来源（SSoT）

**核心思想**：每个信息片段应该只在一个地方定义和维护。

**应用**：

- INDEX.md 是经验的单一事实来源，其他文件引用而非复制
- 经验索引作为经验的 SSoT，避免重复定义
- 质量资产（记忆系统）作为项目规范的 SSoT

### 7. 关注点分离（SoC）

**核心思想**：将系统分解为不同的部分，每个部分负责一个特定的关注点。

**应用**：

- Skills 负责特定领域的任务（req、plan、build、review 等）
- 记忆系统负责质量资产（团队级标准/经验和项目级经验）
- Hooks 负责自动化流程
- Subagents 负责独立任务

### 8. 约定优于配置

**核心思想**：通过约定减少配置，提高开发效率。

**应用**：

- 文件命名约定（`001.req.<标题>.md`、`001.plan.<标题>.md`）
- 目录结构约定（`.cursor/.lingxi/tasks/`、`.cursor/skills/`）
- 索引格式约定（统一索引 `.cursor/.lingxi/memory/INDEX.md`）

## 参考

- **核心价值指引**：`references/core-values.md`
- **静默成功与工作流输出约束**：`references/workflow-output-principles.md`
