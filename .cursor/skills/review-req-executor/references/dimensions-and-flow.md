# Review Req Executor — 维度定义与完整流程

本文档为 review-req-executor 的维度适配矩阵、各维度检查项、输出格式、审查边界与使用场景；SKILL.md 仅保留意图与关键约束。

## 维度适配矩阵

| 需求类型 | 简单   | 中等                          | 复杂                          |
| -------- | ------ | ----------------------------- | ----------------------------- |
| 前端     | D1, D2 | D1-D4                         | D1-D5                         |
| 后端     | D1, D2 | D1-D5                         | D1-D5                         |
| 全栈     | D1, D2 | D1-D5                         | D1-D5                         |
| 简单功能 | D1, D2 | -                             | -                             |
| 其他     | D1, D2 | D1-D5（D4 按「D4 其他」规则） | D1-D5（D4 按「D4 其他」规则） |

## 维度定义

| 维度编号 | 维度名称   | 审查焦点                             |
| -------- | ---------- | ------------------------------------ |
| D1       | 需求完整性 | 目标、边界、用户故事、非目标是否清晰 |
| D2       | 可验证性   | 成功标准和验收标准是否可验证         |
| D3       | 方案合理性 | 技术选型和架构思路是否合理           |
| D4       | 规范完整性 | UI/API/数据模型等规范章节是否完整    |
| D5       | 风险识别   | 技术难点、外部依赖、风险是否识别     |

## D1–D5 检查项与不检查内容

### D1 - 需求完整性（通用必选）

检查项（简单/中等/复杂）：背景说明是否清晰、问题描述是否明确、解决方案概述是否有、目标是否量化可追踪；中等+：非目标是否明确、用户故事是否至少 1 条。不检查：技术实现细节、代码结构设计（属于 plan/build）。

### D2 - 可验证性（通用必选）

检查项：成功标准是否可验证、是否有验证方式、功能需求是否有验收标准；每条 F 是否有验证方式（unit/integration/e2e/manual/rubric）、是否有可判定验收标准；manual/rubric 项是否有可执行验证步骤+预期结果（rubric 含评分维度）；验收检查清单是否完整。不检查：测试用例设计、自动化测试代码。

### D3 - 方案合理性（中等+复杂度）

检查项：技术选型是否在解决方案概述中说明、架构思路是否清晰、选型理由是否说明；复杂：是否有方案对比。不检查：具体代码结构、性能优化细节、安全实现细节。

### D4 - 规范完整性（按类型触发）

- **前端**：交互流程、界面状态、响应式要求（中等+）。
- **后端**：API 接口路径、请求/响应格式、错误码、数据模型、字段约束（按简单/中等/复杂裁剪）。
- **特性标签「文档为主」**：变更范围、受众/读者、版本或发布约定。
- **特性标签「库/SDK」**：不执行前端 UI 规范；若有对外接口则检查接口或行为约定是否描述清楚。
- **D4 其他**（主类型为「其他」）：文档是否具备该任务形态下应有的规范或约定描述；变更范围、验收可执行性、对外交付的受众或使用方式。

D4 执行顺序：有「文档为主」或「库/SDK」→ 用特性标签替代；否则主类型「其他」→ D4 其他；否则按前端/后端分支。

### D5 - 风险识别（中等+复杂度）

检查项：外部依赖是否列出、集成方式是否概述、技术难点是否识别（后端）、可行性结论是否明确（后端）；复杂：风险是否有缓解思路。不检查：降级方案实现、熔断/限流配置、监控告警设计。

## 输出格式

审查范围（需求类型、复杂度、特性标签、审查维度）→ 总体评价（3–6 行）→ 实施准备度（结论 + 验证方式与验收是否覆盖全部 F）→ 详细问题清单（仅输出有问题的维度，每问题含影响与建议）→ 改进优先级（Blockers/High/Medium/Low）。所有维度均无问题时可不输出详细问题清单。遵循 workflow-output-principles；无问题时简要总结，有问题时详细列出。

## 下一步建议

只要输出了审查结果（总体评价、问题清单或改进建议任一项），必须在当轮回复末尾输出「**下一步可尝试（选一项）**」+ 四项 A/B/C/D。无 Blockers/High → A = `/plan` 或 `/build`；有 Blockers/High → A = 先改 req。允许集合：`/plan <taskId>`、`/build <taskId>`、调整 req、回头看 req、其他/跳过。

## 审查边界说明

req 定位：需求提纯与放大、核心技术方案或技术决策（不含实现细节）；不是详细设计文档。不应审查：具体实现代码/函数签名、详细性能调优/安全实现、测试用例设计、部署/运维/监控配置。

## 使用场景

简单功能：D1+D2。复杂后端/全栈：D1–D5，按矩阵与类型执行各维度检查项（见上）。

## 注意事项

审查深度与 req 定位匹配；按复杂度裁剪检查项；输出遵循 workflow-output-principles；实现细节等属于下游阶段。

---

## 与 Commands 的协作

由 `/review-req` 命令自动激活（taskId 可选）；Commands 只负责参数解析和产物说明。
