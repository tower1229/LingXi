---
name: workflow-optimizer
description: 当用户需要对 workflow 进行调优、需要了解 workflow 各组件的设计原则（commands/rules/skills/hooks/subagents）、需要判断应该使用哪种机制实现功能、或需要对方案进行长期收益/代价评估时激活此 Skill。
---

# Workflow Optimizer

## 背景知识

此 Skill 提供以下背景知识：

1. **项目的核心价值指引**（Why 和 How）

   - Why：为创造者打造 AI 时代的专属法宝
   - How：心有灵犀、AI Native、称心如意

2. **技术文档明确的功能用法和最佳实践**

   - Cursor 官方文档明确的能力边界和适用场景
   - Agent Skills 官方规范的功能定义

## 工作流程

### 1. 理解调优需求

明确调优需求：

- **调优目标**：性能优化、功能扩展、架构调整还是体验改进？
- **问题域**：涉及哪个/哪些组件（Commands、Rules、Skills、Hooks、Subagents）？

### 2. 加载背景知识

根据调优需求，按需加载相关指南：

#### 2.1 核心价值指引

- **Workflow 核心价值指引**：`references/workflow-vision.md`
  - Why（远景）：为创造者打造 AI 时代的专属法宝
  - How（路径）：心有灵犀、AI Native、称心如意

#### 2.2 技术能力边界

- **Commands 指南**：`references/commands-guide.md`

  - 官方定义的设计目标、能力边界、适用场景
  - 与其他组件的选择指南

- **Rules 指南**：`references/rules-guide.md`

  - 官方定义的设计目标、能力边界、适用场景
  - 与其他组件的选择指南

- **Skills 指南**：`references/skills-guide.md`

  - 官方定义的设计目标、能力边界、适用场景
  - 与其他组件的选择指南

- **Hooks 指南**：`references/hooks-guide.md`

  - 官方定义的设计目标、能力边界、适用场景
  - 与其他组件的选择指南

- **Subagents 指南**：`references/subagents-guide.md`
  - 官方定义的设计目标、能力边界、适用场景
  - 与其他组件的选择指南

### 3. 价值对齐分析

基于核心价值指引（Why 和 How），分析调优方案的价值对齐：

#### 3.1 心有灵犀

**评估维度**：

- 是否有助于经验沉淀和复用？
- 是否有助于让 AI 按创造者的方式做事？
- 是否有助于项目级记忆能力？

#### 3.2 AI Native

**评估维度**：

- 是否尊重 AI 作为能力源泉？
- 是否为 AI 进化预留空间？
- 是否过度约束 AI？

#### 3.3 称心如意

**评估维度**：

- 是否降低认知负担？
- 是否提供友好的交互体验？
- 是否让常用操作更便捷？

### 4. 架构取舍分析

基于技术能力边界，分析调优方案的架构合理性：

#### 4.1 组件选择

**判断流程**：

1. **明确需求类型**：是单一操作、工作流、约束规则还是独立任务？
2. **匹配技术能力边界**：根据各组件官方定义的适用场景，选择最合适的组件
3. **考虑性能权衡**：评估性能、可维护性、可复用性等维度

**决策矩阵**（基于官方能力边界）：

| 需求类型             | 推荐组件 | 理由（基于官方定义）                                     |
| -------------------- | -------- | -------------------------------------------------------- |
| 单一用途、可重复操作 | Command  | 官方定义：单一用途，不需要单独的上下文窗口               |
| 特定领域知识和工作流 | Skill    | 官方定义：教会 Agent 如何执行特定领域的任务              |
| 系统级约束规则       | Rule     | 官方定义：系统级指令，在提示级别提供持久、可重用的上下文 |
| 自动化、门控、审计   | Hook     | 官方定义：通过自定义脚本观察、控制和扩展 agent 循环      |
| 独立上下文、并行任务 | Subagent | 官方定义：专门 AI 助手，独立的上下文窗口，可以并行执行   |

### 5. 调优建议输出

基于分析，输出：

1. **价值对齐评估**：是否符合核心价值指引（Why 和 How）
2. **架构合理性评估**：是否符合技术能力边界
3. **改进建议**：优化方向、潜在风险
4. **检查清单**：参考 `references/optimization-checklist.md`

## 使用场景

### 场景 1：组件选择决策

**用户**："我想添加一个新功能，应该用 Command 还是 Skill？"

**流程**：

1. 理解功能需求（单一操作 vs 工作流）
2. 加载 Commands 和 Skills 指南（官方能力边界）
3. 根据官方定义的适用场景判断
4. 检查是否符合核心价值指引（Why 和 How）
5. 输出推荐方案及理由

### 场景 2：架构调优

**用户**："我想优化某个阶段的执行效率，有什么建议？"

**流程**：

1. 理解当前架构（涉及哪些组件）
2. 加载相关指南（技术能力边界）
3. 分析性能瓶颈和优化空间
4. 基于 Why 和 How 评估长期收益
5. 输出优化建议和检查清单

### 场景 3：价值判定

**用户**："这个方案符合灵犀的长期规划吗？"

**流程**：

1. 加载 Workflow 核心价值指引（Why 和 How）
2. 分析方案与核心价值的一致性
3. 输出价值判定结果

### 场景 4：技术边界检查

**用户**："这个改动符合 Cursor 的技术能力边界吗？"

**流程**：

1. 理解改动内容（涉及哪些组件）
2. 加载相关指南（官方能力边界）
3. 检查是否符合官方定义的适用场景和限制
4. 输出技术边界检查结果

## 调优检查清单

详细的调优检查清单请参考 `references/optimization-checklist.md`，包括：

- 价值对齐检查（基于 Why 和 How）
- 技术能力边界检查（基于官方定义）

## 参考资料

### 核心价值指引

- `references/workflow-vision.md`：Workflow 核心价值指引（Why 和 How）

### 技术能力边界

- `references/commands-guide.md`：Commands 技术指南（官方定义）
- `references/rules-guide.md`：Rules 技术指南（官方定义）
- `references/skills-guide.md`：Skills 技术指南（官方定义）
- `references/hooks-guide.md`：Hooks 技术指南（官方定义）
- `references/subagents-guide.md`：Subagents 技术指南（官方定义）

### 调优工具

- `references/optimization-checklist.md`：调优检查清单

### 外部参考

- `README.md`：核心价值指引（Why 和 How）
- `AGENTS.md`：工作流核心约束
- `docs/05-development/research/cursor-capabilities-analysis.md`：Cursor 能力分析

## 注意事项

1. **基于官方定义**：组件选择基于 Cursor 官方文档明确的能力边界
2. **价值对齐优先**：优先考虑是否符合核心价值指引（Why 和 How）
3. **按需加载**：根据调优需求按需加载相关指南，避免不必要的上下文占用
