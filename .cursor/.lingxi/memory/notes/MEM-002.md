# 作用域与定义方式约定

## Meta

- **Id**: MEM-002
- **Kind**: principle
- **Status**: active
- **Strength**: validated
- **Scope**: broad
- **Audience**: project
- **Portability**: cross-project
- **Source**: user
- **Tags**: scope, sessionStart, command, skill, workflow, convention
- **CreatedAt**: 2026-02-23T00:00:00.000Z
- **UpdatedAt**: 2026-02-23T00:00:00.000Z
- **Session**: 839b5c02-19d8-417d-87f6-1b69c0f33576

## When to load

- 设计或评审「约定/行为」的生效范围时（如每轮先 memory-retrieve、输出格式、静默成功）
- 决定把约定写在 sessionStart hook 还是 Command/Skill 文档时
- 发现约定被误用为全局或误限为单步时

## One-liner (for injection)

先明确约定应有的作用域（全局 vs 仅工作流/仅某命令），再选定义方式：sessionStart 注入 → 整会话；Command/Skill 文档引用 → 仅该命令/该 Skill 执行时；避免作用域放大或缩小。

## Context / Decision

- **Decision**: 不同定义方式对应不同作用域；设计时先定作用域再选定义方式。
- **Signals**: sessionStart 注入 → 整会话、所有轮次，适合全局行为（如每轮 memory-retrieve、记忆沉淀时机、审计 conversation_id）；Command/Skill 文档引用 → 仅执行该命令或该 Skill 时加载并适用，作用域限于该工作流步骤（如静默成功、下一步建议、输出格式）。
- **Alternatives**: 不区分作用域而随意选用 hook 或文档，易导致约定放大为全局或缩小为未生效。
- **Counter-signals**: 无。

## Pointers

- sessionStart：会话级约定注入
- `.cursor/commands/`、`.cursor/skills/`：命令/技能级约定
