# 006.plan.灵犀优化建议整理

| 属性     | 值                            |
| -------- | ----------------------------- |
| 关联需求 | 006.req.灵犀优化建议整理.md   |
| 创建日期 | 2025-02-23                    |

---

## 1. 目标回放

- **背景**：基于 Cursor 官方课程学习已提出 7 条灵犀优化建议，并整理为 006.req；需按 req 中的 F1–F7 逐条落地到对应 SKILL/文档，保持与灵犀架构与核心价值一致。
- **核心目标**：完成 7 条优化对应的文档/约定更新——先探索再修改（build/plan）、可验证目标与 review 闭环、防需求膨胀、从计划重来、半静默可验证性、对话与上下文建议、子代理 vs Skill 选型；每条均有可验收的文档或约定存在。
- **成功标准**：F1–F7 各自验收标准满足；相关文档无矛盾、符合静默成功与 AI Native 原则。
- **非目标**：不引入代码或自动化测试；验收以文档一致性与手工验证为主。

---

## 2. 任务清单

| 序号 | 任务描述 | 依赖任务 | 预估耗时 | 状态   |
| ---- | -------- | -------- | -------- | ------ |
| T1   | F1：在 build-executor（及可选 plan-executor）SKILL 中增加「先探索再修改」约定 | -    | 25min | 待开始 |
| T2   | F2：在 review-executor 或 workflow-output-principles 中约定可验证目标前置与下一步含可验证动作 | -    | 25min | 待开始 |
| T3   | F3：在 req-executor 或 review-req-executor 中增加「建议先 /plan」的范围/复杂度提示 | -    | 20min | 待开始 |
| T4   | F4：在 workflow-output-principles 的 /build、/review 下一步建议中增加「从计划重来」选项 | -    | 15min | 待开始 |
| T5   | F5：在 lingxi-memory 或 memory-system 中为可靠性判定增加「可验证性」维度 | -    | 20min | 待开始 |
| T6   | F6：在 about-lingxi references 或 README 中增加「对话与上下文」使用建议 | -    | 15min | 待开始 |
| T7   | F7：在 component-guides 或 cursor-learn-courses-summary 中增加子代理 vs Skill 选型与成本说明 | -    | 15min | 待开始 |
| T8   | 验收：按 006.testcase 执行文档检查与手工验证 | T1–T7 | 20min | 待开始 |

**状态说明**：待开始 / 进行中 / 已完成 / 已跳过

---

## 3. 依赖关系图

```mermaid
graph TD
    T1[T1 先探索再修改]
    T2[T2 可验证目标与 review]
    T3[T3 防需求膨胀]
    T4[T4 从计划重来]
    T5[T5 半静默可验证性]
    T6[T6 对话与上下文建议]
    T7[T7 子代理 vs Skill]
    T8[T8 验收]
    T1 --> T8
    T2 --> T8
    T3 --> T8
    T4 --> T8
    T5 --> T8
    T6 --> T8
    T7 --> T8
```

---

## 4. 执行顺序

1. **T1**：更新 `.cursor/skills/build-executor/SKILL.md`（及可选 `.cursor/skills/plan-executor/SKILL.md`）  
   - 在步骤或原则中增加：对本次任务涉及的不熟悉模块/目录，先用语义搜索或读关键文件建立理解，再开始实现；用自然语言描述，无硬编码规则。

2. **T2**：更新 `.cursor/skills/review-executor/SKILL.md` 或 `.cursor/skills/about-lingxi/references/workflow-output-principles.md`  
   - 约定：存在测试/类型检查/lint 时，审查前优先执行或说明状态；下一步建议中增加「运行测试/类型检查」等可验证动作选项。

3. **T3**：更新 `.cursor/skills/req-executor/SKILL.md` 或 `.cursor/skills/review-req-executor/SKILL.md`  
   - 增加范围/复杂度提示（自然语言）：需求明显跨多模块/多文件时，在产出或审查建议中提示「建议先执行 /plan 拆解后再 /build」；req 或下一步建议中区分简单→直接 build、复杂→建议 plan。

4. **T4**：更新 `.cursor/skills/about-lingxi/references/workflow-output-principles.md`  
   - 在 /build、/review 的「下一步可尝试」示例或允许集合中增加：若实现已偏离 req/plan，建议撤销更改→修订 plan 或 req→重新 /build。

5. **T5**：更新 `.cursor/agents/lingxi-memory.md` 或 `.cursor/skills/about-lingxi/references/memory-system.md`  
   - 在可靠性判定指引中补充可验证性维度：用户原话近乎一字不差且可被后续客观验证→倾向高可靠；需主观解释或易歧义→倾向低可靠；自然语言规则或示例即可。

6. **T6**：更新 `.cursor/skills/about-lingxi/references/cursor-learn-courses-summary.md` 或 `memory-system.md` 或项目 `README.md`  
   - 增加「对话与上下文建议」小节：切换新任务或 Agent 反复犯错时可新开对话；延续旧任务可引用旧对话（@chat 或自然语言）；记忆检索跨会话生效。

7. **T7**：更新 `.cursor/skills/about-lingxi/references/component-guides.md` 或 `cursor-learn-courses-summary.md`  
   - 在灵犀对照/Subagents 部分增加：子代理适合独立上下文、多步、需隔离的任务；可一次性完成的任务优先用 Skill；避免不必要子代理以控制 token。

8. **T8**：验收  
   - 按 006.testcase 执行文档检查与手工验证。

---

## 5. 技术调研结果

- 无需新增技术栈；所有改动为 Markdown/SKILL 文案与约定，符合现有灵犀文档规范与 workflow-output-principles。
- 各 executor SKILL 的「下一步建议」允许集合需与 workflow-output-principles 一致，避免冲突。

---

## 6. 文档同步清单

| 文档路径 | 变更类型 | 变更说明 |
| -------- | -------- | -------- |
| `.cursor/skills/build-executor/SKILL.md` | 更新 | 增加「先探索再修改」约定 |
| `.cursor/skills/plan-executor/SKILL.md` | 按需更新 | 可选增加「先探索再修改」 |
| `.cursor/skills/review-executor/SKILL.md` 或 `workflow-output-principles.md` | 更新 | 可验证目标前置；下一步含可验证动作 |
| `.cursor/skills/req-executor/SKILL.md` 或 `review-req-executor/SKILL.md` | 更新 | 「建议先 /plan」的范围/复杂度提示 |
| `.cursor/skills/about-lingxi/references/workflow-output-principles.md` | 更新 | /build、/review 下一步增加「从计划重来」 |
| `.cursor/agents/lingxi-memory.md` 或 `memory-system.md` | 更新 | 可靠性判定增加可验证性维度 |
| about-lingxi references 或 README | 更新 | 「对话与上下文」使用建议 |
| `component-guides.md` 或 `cursor-learn-courses-summary.md` | 更新 | 子代理 vs Skill 选型与成本 |

---

## 7. 测试策略

- 无单元/集成测试；全部为**文档与约定一致性**验证。
- 详见：006.testcase.灵犀优化建议整理.md（手工验证：各文档存在对应小节/表述）。
