# /init - 项目初始化命令

## ⚠️ 输出约束（必须遵守）

**禁止输出执行过程描述**：
- ❌ 禁止输出类似"开始执行 `/init` 命令"、"先了解相关 Skills"、"继续收集信息"等执行过程的自言自语
- ✅ 直接输出结果内容，不要描述执行步骤
- ✅ 遵循"静默执行"原则：执行过程静默，只输出最终结果

**正确的输出方式**：
- 直接输出"命令目的说明"部分（不要先说"开始执行"）
- 直接输出收集到的信息（不要先说"正在收集"）
- 直接输出记忆候选和确认选项（不要先说"正在识别"）

## 命令用途

引导式初始化 workflow 到新项目，快速建立项目上下文（技术栈、目录结构、关键模块、业务链路与约束），并生成一份**连续编号**的“记忆候选清单”（包含草稿项与可选候选项，默认不写入，需用户门控）。

---

## 依赖的 Agent Skills

- `init-executor`：按项目类型（A-H）驱动初始化收集与草稿生成，并在用户确认后可选写入
- `memory-capture`：捕获初始化过程中的判断/取舍为记忆候选
- `memory-curator`：治理与写入记忆（合并优先、冲突否决、写入 notes + 更新 INDEX）

---

## 使用方式

```
/init
```

命令无需参数，通过对话式引导收集项目信息。

---

## 写入门控（关键规则）

> - 本命令会生成“记忆候选清单”，**默认不写入磁盘**。
> - 只有当你在 Q2 明确选择写入（`All` / `1,3`）时，才会落盘到 `.cursor/.lingxi/memory/notes/` 并更新 `.cursor/.lingxi/memory/INDEX.md`。
> - 你只回复 `A`（不含 `; ...`）时，等价于 `A; S`（默认跳过写入）。

---

## 交互契约（同屏双问）

> 说明：具体“按类型收集清单（A-H）→ 生成草稿 → 门控写入”的详细执行逻辑，见 `.cursor/skills/init-executor/SKILL.md` 与其依赖 `skills/init-executor/references/init-checklists.md`。

```markdown
## 请确认并做两项选择（互不影响）

### Q1：下一步动作（必选）
- 🚀 **A) 信息准确，进入候选清单生成阶段**
- 📝 **B) 信息准确，但需要重点调查某个模块**（必须附模块名）
- ✅ **C) 信息准确，继续深入调查所有模块**
- 📋 **D) 信息需要补充或修正**（必须附补充/修正点）

### Q2：是否写入到记忆库（可选，默认跳过）
- ⏭️ **S) 跳过写入**（默认；只展示候选清单，不写入磁盘）
- ✅ **All) 写入候选清单的全部条目**
- 🔢 **1,3,5) 写入候选清单中选择编号的条目**（逗号分隔）

### 输入方式（推荐一行）
- `A; S`
- `B: <模块名>; All`
- `C; 1,3`
- `D: <补充/修正点>; S`

（也支持分两条消息：先回 Q1，再回 Q2）
```

**解析与追问规则**：

- Q1 必选；Q2 可选（缺省默认为 `S`）
- 用户只回复 `A` 等价 `A; S`
- 若用户只回答 Q2（如 `All`），只追问补齐 Q1（不重复贴大段内容）
- 若用户选择 `B` 但未提供模块名，只追问模块名；若选择 `D` 但未提供修正点，只追问修正点
