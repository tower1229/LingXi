---
description: "Skill: Context Engineering (minimal high-signal context)"
globs:
  - "ai/context/**"
  - "ai/requirements/**"
alwaysApply: true
---

# Skill：Context Engineering（最小高信号）

## 核心目标

找到**最小可能的高信号 token 集合**，最大化期望结果；避免上下文膨胀导致准确率下降。

## 产物策略（必须）

- 写文档时优先写：
  - **边界**：做什么/不做什么
  - **关键概念**：少量稳定术语与流程
  - **易错点**：可复现坑（触发条件 + 校验方式）
  - **指针**：入口文件/关键函数/配置入口（路径即可）
- 不写：
  - 代码/接口/数据结构的完整复制
  - 可从代码直接获取的细节复述

## “先指针后细节”规则

当需要深入细节时：

1. 先补一条指针（文件路径 + 入口函数/类）
2. 再去读代码细节

## 输出风格（务必简洁）

- 在聊天输出中少贴大段内容，优先引用路径
- 每个结论尽量附"如何验证"（测试/脚本/手工步骤）

## 工具设计的上下文效率（Commands 和 Skills）

### 核心原则

Commands 和 Skills 的输出应遵循"最小高信号 token 集合"原则，避免上下文膨胀。

### Commands 输出规范

- **精简输出**：只返回必要信息，避免冗长输出
  - ✅ 输出："已创建 `ai/requirements/in-progress/REQ-001.md`，下一步执行 `/plan REQ-001`"
  - ❌ 输出：完整复制文件内容、长篇解释、重复信息
- **文件引用优于复制**：引用路径而非复制大段内容
  - ✅ 输出："请查看 `ai/requirements/in-progress/REQ-001.md` 的需求定义"
  - ❌ 输出：完整复制需求文档内容到对话中
- **结构化输出**：使用表格、列表等结构化格式，便于快速理解
  - ✅ 使用表格展示任务列表、状态信息
  - ✅ 使用列表展示要点、步骤
  - ❌ 使用长段落描述结构化信息

### Skills 输出规范

- **按需加载**：Skills 的输出应支持"按需加载"策略
  - 默认只输出摘要或指针
  - 需要详细信息时再加载完整内容
- **分级输出**：根据优先级分级输出
  - High 优先级：完整加载并主动提醒
  - Medium 优先级：加载摘要并建议查看
  - Low 优先级：只输出文件路径

### 上下文效率检查清单

在执行 Commands 或 Skills 时，检查：

- [ ] 输出是否包含冗余信息？
- [ ] 是否可以用文件引用替代内容复制？
- [ ] 是否使用了结构化格式？
- [ ] 是否遵循了"最小高信号"原则？
