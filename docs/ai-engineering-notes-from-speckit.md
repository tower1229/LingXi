# 认知重建：从“规范驱动”到“AI 工程化（上下文工程 × 复合工程）”的实践总结

> 灵感来源（原文）：[认知重建：Speckit 用了三个月，我放弃了——走出工具很强但用不好的困境](https://mp.weixin.qq.com/s/CXx-0ar1EBf14vgQHHjU7A)

本文对原文进行结构化提炼：聚焦其**指导思想**与**可复用的 AI 辅助开发实践**，以便在团队/项目中落地复用。

---

## 1. 核心结论（一句话）

AI 工具“用不好”的根因通常不是流程不够规范，而是：

- **上下文不完整/不高信号** → AI 决策质量差、容易偏航；
- **过程知识不沉淀** → 每次冷启动、边际成本恒定；

破局路径是把 AI 辅助研发做成一套“越用越快”的工程系统：

- **上下文工程（Context Engineering）**：在正确的时刻给到最小高信号信息
- **复合工程（Compounding Engineering）**：让每一单位工作都降低后续工作成本

---

## 2. 为什么“规范驱动流程”在企业场景容易失效（问题定义）

原文以 speckit / openspec 的经验为起点，总结了企业真实研发中的几类“硬现实”：

- **需求不线性**：多方博弈、依赖不确定、并行推进、持续变更，使线性阶段模型（一次性规范→一次性规划→按序实施）很难稳定执行。
- **“考古”是写代码前的主战场**：历史坑、平台规则、配置规范、跨团队约束、服务边界等信息，往往不在仓库里显式可得，导致人在 review 时逐步想起再补充给 AI。
- **过程价值被忽视**：真正昂贵的知识存在于“执行→验证→排查→决策”的过程中，但传统规范更关注 Spec/Code 两端，忽略 Process。
- **边际成本恒定**：同类需求做第 N 次仍需重复认知/排查，因为知识停留在人脑，没有进入系统。

---

## 3. 第一性原理：人的认知是硬约束，系统应成为“外挂大脑”

原文强调人的工作记忆/注意力窗口有限，因此工程系统应该适配真实高效的工作方式，而不是强迫人迁就“理想流程”。

可复用启示：

- 复杂任务必须有**显式的状态/索引**承载与传递信息
- 把“脑内 SOP”外化为**可执行的工具链**，降低持续认知负担

---

## 4. 复合工程（Compounding Engineering）：让每一步都成为下一步的基石

原文借鉴的闭环是：**Plan → Work → Review → Archive**，并强调“Archive”的含义是归档已完成的需求，而经验沉淀在各阶段通过即时捕获完成。

典型“复利沉淀”场景（从人肉提醒 → 系统免疫）：

- **重复犯同类错**：把教训写进“项目记忆入口/规则/提示”，让错误不再复现
- **反复需要人工检查**：沉淀为 lint / hook / CI 拦截，把注意力前移
- **复杂流程被频繁执行**：封装为 Skill/Command/Agent，让新人也能执行专家级操作
- **解决了有价值的问题**：结构化记录到 experience（经验库），后续自动检索并提醒

关键原则：

- **当下立刻沉淀**，而不是事后补文档
- 优先沉淀：**高频 + 高代价 + 易忘 + 易复用** 的知识点

---

## 5. 上下文工程（Context Engineering）：AI 的能力前提是信息“完整且高信号”

原文将“提示词工程”升级为“上下文工程”：管理进入模型的全部信息集合（系统提示、工具定义、对话历史、检索文档等），并指出“越多越好”会带来反噬：

- **上下文腐蚀 / 注意力预算耗尽**：噪声稀释关键点，导致行为异常
- **工具设计导致上下文污染**：边界不清、描述冗长、返回冗余，会加速窗口膨胀

可落地的上下文工程原则：

- **分层组织**：先索引/概要，细节按需加载；“位置即语义”
- **Just-in-Time Context**：不预加载一切，用轻量索引 + 阶段化拉取
- **压缩与笔记系统**：长任务可总结/压缩，并通过结构化笔记在窗口外持久化
- **工具上下文效率**：边界清晰、返回精简、自包含，减少“选工具”的决策成本

---

## 6. 架构范式：Command → Agent（决策）→ Skill（执行）

原文提炼了“工具架构分层”，用于把复杂性隐藏到系统内部：

- **Command**：用户交互入口（入口越少越好，最好只表达意图）
- **Agent（决策层）**：意图识别、流程路由、上下文管理、组合调用 skills
- **Skill（执行层）**：固化固定流程，单一职责、可复用、可组合、可演进

并给出演进路径：

- **文档（被动提醒） → 校验型 Skill（半自动） → 一键 Command（全自动）**
- 以频率驱动抽象：不要过早封装，实践到一定次数/调用量再升级形态

---

## 7. 长任务与多 Agent：用“结构化状态传递”替代“一个大脑记住一切”

原文指出“上下文爆满导致半途而废”的根因之一，是单一 Agent 长时间累积上下文。解决思路是类比团队协作：

- 把任务拆成原子单元，让不同“子任务 Agent”在**独立上下文窗口**中完成
- 通过**结构化状态文件**进行交接，而不是依赖对话记忆累积
- 类比“轮班工程师”：每个人工作时间有限，但交接清晰则可持续推进

---

## 8. 可复用的实践清单（可直接落地）

- **入口极简**：减少命令/工具选择成本，让用户表达意图即可
- **人工闸门**：关键推进/高风险操作/写入知识库必须显式确认，避免静默漂移
- **单一事实源（SSoT）**：用索引文件承载当前阶段、下一步动作、阻塞项、关键链接
- **把过程写成资产**：Worklog、排查结论、验证方法、关键决策理由进入可检索载体
- **自动化优先于文档**：能 lint/hook/CI 的就不要依赖“人记得”
- **最小高信号上下文**：索引先行、按需加载、返回精简，避免上下文膨胀反噬

---

## 9. 与本仓库（cursor-workflow）的对齐点（可作为设计 rationale）

原文的思想与本仓库的设计目标高度一致：

- 单入口 Command（表达意图）
- Skills 作为可复用执行单元
- 经验索引与经验沉淀机制（让知识复利）
- 人工确认闸门（避免静默漂移）
- 会话暂存与结构化状态文件（支撑长任务/交接）

建议把该文作为仓库的“理念来源”，在需要时引用原文链接作为背景依据。

